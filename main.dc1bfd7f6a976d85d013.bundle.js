(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{255:function(module,exports,__webpack_require__){__webpack_require__(256),__webpack_require__(359),module.exports=__webpack_require__(360)},360:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(107);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)(function loadStories(){__webpack_require__(516)},module)}.call(this,__webpack_require__(178)(module))},516:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_storybook_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(107),_src_index__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(76),_ref=react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src_index__WEBPACK_IMPORTED_MODULE_2__.a,{universe:"random",dotSize:"random"}),_ref2=react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src_index__WEBPACK_IMPORTED_MODULE_2__.a,{universe:"ordered",dotSize:"random"}),_ref3=react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src_index__WEBPACK_IMPORTED_MODULE_2__.a,{universe:"ordered",dotSize:"uniform"}),_ref4=react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src_index__WEBPACK_IMPORTED_MODULE_2__.a,{universe:"random",dotSize:"random",dotCount:80});Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.storiesOf)("Hubble",module).add("random universe, random dot",function(){return _ref}).add("ordered universe, random dot",function(){return _ref2}).add("ordered universe, uniform dot",function(){return _ref3}).add("random universe, random dot, custom count",function(){return _ref4})}.call(this,__webpack_require__(178)(module))},76:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(22),__webpack_require__(27),__webpack_require__(32),__webpack_require__(20),__webpack_require__(517),__webpack_require__(55),__webpack_require__(120),__webpack_require__(28),__webpack_require__(89),__webpack_require__(42),__webpack_require__(29),__webpack_require__(71),__webpack_require__(92),__webpack_require__(90),__webpack_require__(234),__webpack_require__(228),__webpack_require__(104),__webpack_require__(1),__webpack_require__(119),__webpack_require__(238),__webpack_require__(230),__webpack_require__(53),__webpack_require__(231),__webpack_require__(26),__webpack_require__(91),__webpack_require__(33),__webpack_require__(30),__webpack_require__(34),__webpack_require__(143);var react=__webpack_require__(10),react_default=__webpack_require__.n(react),ResizeObserver_es=__webpack_require__(251),build=__webpack_require__(252),UNIFORM="uniform",UNIVERSE_TYPE="ordered",RADIUS=5,SPACE_SIZE=[1e3,500],DOT_COUNT=250,GRADIENT=__webpack_require__.n(build)()(["blue","red"],501),memoizee=(__webpack_require__(227),__webpack_require__(253)),memoizee_default=__webpack_require__.n(memoizee),lodash=__webpack_require__(254);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function getRandomInt(min,max){return min=Math.ceil(min),max=Math.floor(max),Math.floor(Math.random()*(max-min+1))+min}var _DOT_SIZE_MAPPING,getChangedCenter=Object(lodash.debounce)(function(state,setState){var ind=Math.ceil(Math.random()*state.universe.length);setState(function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))});return target}({},state,{active:ind<state.universe.length?ind:state.universe.length-1,changes:state.changes+1,transition:!0,oldActive:state.active}))},100),getExpandedSpaceSize=memoizee_default()(function(x,y,time){return[x,y].map(function(el){return el*Math.pow(1.00005,time)})}),getOrigPoss=function(_ref,size){var x=_ref.x,y=_ref.y,radius=_ref.radius;return[size[0]*x,size[1]*y,radius]},getShiftedPoss=function(_ref2,state,spaceSize){var x=_ref2.x,y=_ref2.y,radius=_ref2.radius;return[spaceSize[0]*x-state.pixelShift[0]/2,spaceSize[1]*y-state.pixelShift[1]/2,radius]},sortUniverse=function(universe){return universe.sort(function(a,b){return a.x+a.y>b.x+b.y?1:-1})},collision=function(_ref3,universe,spaceSize){var x=_ref3.x,y=_ref3.y,radius=_ref3.radius;x*=spaceSize[0],y*=spaceSize[1];for(var i=0;i<universe.length;i++){var dot=universe[i],dotX=dot.x*spaceSize[0],dotY=dot.y*spaceSize[1];if(Math.sqrt(Math.pow(x-dotX,2)+Math.pow(y-dotY,2))<=radius+dot.radius+30)return!0}return!1};function generation_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var _UNIVERSE_TYPE_MAPPIN,DOT_SIZE_MAPPING=(generation_defineProperty(_DOT_SIZE_MAPPING={},UNIFORM,function(){var radius=0<arguments.length&&void 0!==arguments[0]?arguments[0]:RADIUS;return radius}),generation_defineProperty(_DOT_SIZE_MAPPING,"random",function(){var min=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,max=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;return getRandomInt(min,max)}),_DOT_SIZE_MAPPING),getOrderedDot=function(x,y,dotSize){return{x:x,y:y,radius:DOT_SIZE_MAPPING[dotSize]()}},getRandomDot=function(dotSize){return{x:Math.random(),y:Math.random(),radius:DOT_SIZE_MAPPING[dotSize]()}};function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Hubble_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function Hubble_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var UNIVERSE_TYPE_MAPPING=(Hubble_defineProperty(_UNIVERSE_TYPE_MAPPIN={},"ordered",function(spaceSize,dotSize){for(var universe=[{x:.5,y:.5,radius:RADIUS}],start=[.05,.05];1>start[0];){for(;1>start[1];)universe.push(getOrderedDot.apply(void 0,start.concat([dotSize]))),start[1]+=.05;start[0]+=.05,start[1]=.05}return universe.shift(),universe}),Hubble_defineProperty(_UNIVERSE_TYPE_MAPPIN,"random",function(spaceSize,dotSize,dotCount){for(var universe=[{x:.5,y:.5,radius:RADIUS}],c=0;c<dotCount;c++){var dot=getRandomDot(dotSize);collision(dot,universe,spaceSize)?c--:universe.push(dot)}return universe.shift(),universe}),_UNIVERSE_TYPE_MAPPIN),ctxDraw=function(x,y,radius,ctx,color,method,rc){return rc?void rc.circle(x,y,2*radius):(ctx.beginPath(),ctx.arc(x,y,radius,0,2*Math.PI),ctx.strokeStyle=color,ctx.fillStyle=color,void ctx[method||"stroke"]())},getDiffs=function(state,canvasSize,spaceSize,setState,active){var activeCoords=state.universe[active],origPoss=getOrigPoss({x:activeCoords.x,y:activeCoords.y,radius:activeCoords.radius},canvasSize),shiftedPoss=getShiftedPoss(activeCoords,state,spaceSize);return origPoss.map(function(el,i){return el-shiftedPoss[i]})},_ref=react_default.a.createElement("p",{className:"hubble-caption"},react_default.a.createElement("span",null,"Hubble expansion")),Hubble_Hubble=function(_React$Component){function Hubble(props){var _this;(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,Hubble);var _this$props=(_this=_possibleConstructorReturn(this,_getPrototypeOf(Hubble).call(this,props))).props,_this$props$universe=_this$props.universe,universe=void 0===_this$props$universe?UNIVERSE_TYPE:_this$props$universe,_this$props$dotSize=_this$props.dotSize,dotSize=void 0===_this$props$dotSize?UNIFORM:_this$props$dotSize,_this$props$dotCount=_this$props.dotCount,dotCount=void 0===_this$props$dotCount?DOT_COUNT:_this$props$dotCount;return _this.canvasState={canvasSize:SPACE_SIZE},_this.setCanvasState=function(n){_this.canvasState=n,_this.forceUpdate()},_this.state={transitionDiffs:[0,0],time:0,changes:0,universe:[{x:.5,y:.5,radius:RADIUS}].concat(sortUniverse(UNIVERSE_TYPE_MAPPING[universe](_this.canvasState.canvasSize,dotSize,dotCount))),pixelShift:[0,0],active:0,observer:new ResizeObserver_es.a(function(entries){var newWidth=entries[0].contentRect.width;newWidth!==_this.canvasState.canvasSize[0]&&_this.setCanvasState(function Hubble_objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?Hubble_ownKeys(source,!0).forEach(function(key){Hubble_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):Hubble_ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))});return target}({},_this.canvasState,{canvasSize:[newWidth,newWidth/2]}))})},_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Hubble,react_default.a.Component),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Hubble,[{key:"componentDidUpdate",value:function componentDidUpdate(){var _this2=this;if(this.state.time<500)setTimeout(function(){return _this2.setState({pixelShift:[_this2.spaceSize[0]-_this2.canvasState.canvasSize[0],_this2.spaceSize[1]-_this2.canvasState.canvasSize[1]],time:_this2.state.time+1>500?_this2.state.time:_this2.state.time+1})},10);else if(this.state.transition){var newDiffs=getDiffs(this.state,this.canvasState.canvasSize,this.spaceSize,this.setState.bind(this),this.state.active),approached=this.diffs.map(function(el,i){return n=el+_this2.state.transitionDiffs[i],t=newDiffs[i],a=function(n,t){return n+.08*(t-n)}(n,t),.3>Math.abs(t-a)?t:a;var n,t,a});if(approached.slice(0,2).every(function(el,i){return el===newDiffs[i]}))this.setState({transition:!1,transitionDiffs:[0,0],oldActive:void 0});else{var transitionDiffs=approached.map(function(el,i){return el-_this2.diffs[i]});setTimeout(function(){return _this2.setState({transitionDiffs:transitionDiffs})},50)}}else setTimeout(function(){return getChangedCenter(_this2.state,_this2.setState.bind(_this2))},500)}},{key:"render",value:function render(){var _this3=this,canvasState=this.canvasState,canvas=this.canvas,hubble=this.hubble,canvasSize=canvasState.canvasSize;if(hubble&&this.state.observer.observe(hubble),canvas){var ctx=canvas.getContext("2d");ctx.clearRect(0,0,canvasSize[0],canvasSize[1]);var spaceSize=getExpandedSpaceSize.apply(void 0,_toConsumableArray(canvasSize).concat([this.state.time]));this.spaceSize=spaceSize,this.state.universe.forEach(function(pos,i){return ctxDraw.apply(void 0,_toConsumableArray(getOrigPoss(pos,canvasSize)).concat([ctx,"blue",_this3.state.active===i&&"fill"]))});var diffs=getDiffs(this.state,canvasSize,spaceSize,this.setState.bind(this),[this.state.oldActive,this.state.active].find(function(el){return void 0!==el}));this.diffs=diffs,this.state.universe.forEach(function(pos){var poss=getShiftedPoss(pos,_this3.state,spaceSize),posX=poss[0]+diffs[0]+_this3.state.transitionDiffs[0],posY=poss[1]+diffs[1]+_this3.state.transitionDiffs[1];ctxDraw(posX,posY,poss[2],ctx,GRADIENT[_this3.state.time])})}return react_default.a.createElement("div",{ref:function ref(me){_this3.hubble||(_this3.hubble=me,_this3.forceUpdate())},className:"hubble-expansion"},react_default.a.createElement("div",{className:"container"},react_default.a.createElement("canvas",{width:"".concat(canvasState.canvasSize[0],"px"),height:"".concat(canvasState.canvasSize[1],"px"),ref:function ref(me){_this3.canvas||(_this3.canvas=me,_this3.forceUpdate())}})),_ref)}}]),Hubble}();Hubble_Hubble.displayName="Hubble";var src_Hubble=Hubble_Hubble;Hubble_Hubble.__docgenInfo={description:"",methods:[],displayName:"Hubble"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Hubble.js"]={name:"Hubble",docgenInfo:Hubble_Hubble.__docgenInfo,path:"src/Hubble.js"});__webpack_exports__.a=src_Hubble}},[[255,1,2]]]);
//# sourceMappingURL=main.dc1bfd7f6a976d85d013.bundle.js.map